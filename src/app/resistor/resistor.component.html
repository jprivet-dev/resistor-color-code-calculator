<ng-container *transloco="let t">
    <ng-container *ngIf="(resistor$ | async) as resistor">
        <div class="row">
            <div class="col">
                <div class="d-flex justify-content-center pt-4 pb-3">
                    <div>
                        <ng-container *ngFor="let count of bandsCounts">
                            <input (click)="setBandsCount(count)" [checked]="resistor.bandsCount === count"
                                   type="radio" class="btn-check" name="bands-count"
                                   id="{{ 'bands-count-radio-' + count }}"
                                   autocomplete="off">
                            <label class="btn btn-outline-primary rounded-pill mx-1"
                                   for="{{ 'bands-count-radio-' + count }}">
                                {{ t('bands', {bandsCount: count}) }}
                            </label>
                        </ng-container>
                    </div>
                </div>
                <div class="d-flex justify-content-center py-3">
                    <div class="resistor-object {{ 'bands-' + resistor.bandsCount }}">
                        <div class="leads rounded-top-4"></div>
                        <div class="body rounded-3 d-flex align-self-stretch">
                            <div *ngFor="let bandName of setBandsNameListByBandsCount(resistor.bandsCount)"
                                 [appResistorColor]="resistor[bandName].color"
                                 ngbTooltip="{{ t(bandName) | titlecase }}" placement="bottom"
                                 class="band band-{{ bandName }} border-0"
                            ></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="d-flex h-100 justify-content-center align-items-center">
                    <div class="characteristics py-3 px-4 border rounded-3 bg-body-tertiary">
                        <h1>
                            {{ resistance$ | async | format: 'resistance' }}
                        </h1>
                        <h2 class="text-secondary">
                            {{ tolerance$ | async | format: 'tolerance' }}
                        </h2>
                        <h2 *ngIf="(thermalCoefficient$ | async) as thermalCoefficient" class="text-secondary">
                            {{ thermalCoefficient | format: 'thermalCoefficient' }}
                        </h2>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center py-3"
             *ngIf="setBandsNameListByBandsCount(resistor.bandsCount) as bandsName">
            <table class="table table-sm">
                <thead>
                <tr>
                    <th scope="col">
                        {{ t('color') | titlecase }}
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('digit1') | titlecase }}
                        <div [appResistorColor]="resistor['digit1'].color" class="p-1 rounded-pill"></div>
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('digit2') | titlecase }}
                        <div [appResistorColor]="resistor['digit2'].color" class="p-1 rounded-pill"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('digit3')">
                        {{ t('digit3') | titlecase }}
                        <div [appResistorColor]="resistor['digit3'].color" class="p-1 rounded-pill"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('multiplier')">
                        {{ t('multiplier') | titlecase }}
                        <div [appResistorColor]="resistor['multiplier'].color" class="p-1 rounded-pill"></div>
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('tolerance') | titlecase }}
                        <div [appResistorColor]="resistor['tolerance'].color" class="p-1 rounded-pill"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('thermalCoefficient')">
                        {{ t('thermalCoefficient') | titlecase }}
                        <div [appResistorColor]="resistor['thermalCoefficient'].color"
                             class="p-1 rounded-pill"></div>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let color of bandsColors">
                    <!-- colors -->
                    <th scope="row">
                        <div [appResistorColor]="color" class="color-name text-start rounded-pill">
                            {{ t('colorName.' + color) | titlecase }}
                        </div>
                    </th>
                    <!-- digit1 -->
                    <td>
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.digit1[color]"
                                    (click)="setBandDigit1(color)"
                                    [class.active]="resistor.digit1.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.digit1[color] }}
                            </button>
                        </div>
                    </td>
                    <!-- digit2 -->
                    <td>
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.digit2[color]"
                                    (click)="setBandDigit2(color)"
                                    [class.active]="resistor.digit2.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.digit2[color] }}
                            </button>
                        </div>
                    </td>
                    <!-- digit3 -->
                    <td *ngIf="bandsName.includes('digit3')">
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.digit3[color]"
                                    (click)="setBandDigit3(color)"
                                    [class.active]="resistor.digit3.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.digit3[color] }}
                            </button>
                        </div>
                    </td>
                    <!-- multiplier -->
                    <td *ngIf="bandsName.includes('multiplier')">
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.multiplier[color]"
                                    (click)="setBandMultiplier(color)"
                                    [class.active]="resistor.multiplier.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.multiplier[color] | format: 'multiplier' }}
                            </button>
                        </div>
                    </td>
                    <!-- tolerance -->
                    <td>
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.tolerance[color]"
                                    (click)="setBandTolerance(color)"
                                    [class.active]="resistor.tolerance.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.tolerance[color] | format: 'tolerance' }}
                            </button>
                        </div>
                    </td>
                    <!-- thermalCoefficient -->
                    <td *ngIf="bandsName.includes('thermalCoefficient')">
                        <div class="d-grid">
                            <button *ngIf="resistorConfig.thermalCoefficient[color]"
                                    (click)="setBandThermalCoefficient(color)"
                                    [class.active]="resistor.thermalCoefficient.color === color"
                                    class="btn btn-color text-start rounded-pill" type="button">
                                <span [appResistorColor]="color" class="circle-color"></span>
                                {{ resistorConfig.thermalCoefficient[color] | format: 'thermalCoefficient' }}
                            </button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </ng-container>
</ng-container>
