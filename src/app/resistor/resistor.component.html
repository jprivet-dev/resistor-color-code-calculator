<ng-container *transloco="let t">
    <ng-container *ngIf="(resistor$ | async) as resistor">
        <div class="d-flex justify-content-center pt-4 pb-3">
            <div>
                <ng-container *ngFor="let count of bandsCounts">
                    <input (click)="setBandsCount(count)" [checked]="resistor.bandsCount === count"
                           type="radio" class="btn-check" name="bands-count" id="{{ 'bands-count-radio-' + count }}"
                           autocomplete="off">
                    <label class="btn btn-outline-primary rounded-pill mx-1" for="{{ 'bands-count-radio-' + count }}">
                        {{ t('bands', {bandsCount: count}) }}
                    </label>
                </ng-container>
            </div>
        </div>

        <div class="d-flex justify-content-center py-3">
            <div class="resistor-object {{ 'bands-' + resistor.bandsCount }}">
                <div class="leads rounded-top-4"></div>
                <div class="body rounded-3 d-flex align-self-stretch">
                    <div *ngFor="let bandName of setBandsNameListByBandsCount(resistor.bandsCount)"
                         [appResistorColor]="resistor[bandName].color"
                         ngbTooltip="{{ t(bandName) | titlecase }}" placement="bottom"
                         class="band band-{{ bandName }} border-0"
                    ></div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center py-3"
             *ngIf="setBandsNameListByBandsCount(resistor.bandsCount) as bandsName">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">
                        {{ t('color') | titlecase }}
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('digit1') | titlecase }}
                        <div [appResistorColor]="resistor['digit1'].color" class="p-1"></div>
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('digit2') | titlecase }}
                        <div [appResistorColor]="resistor['digit2'].color" class="p-1"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('digit3')">
                        {{ t('digit3') | titlecase }}
                        <div [appResistorColor]="resistor['digit3'].color" class="p-1"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('multiplier')">
                        {{ t('multiplier') | titlecase }}
                        <div [appResistorColor]="resistor['multiplier'].color" class="p-1"></div>
                    </th>
                    <th scope="col" class="pb-0">
                        {{ t('tolerance') | titlecase }}
                        <div [appResistorColor]="resistor['tolerance'].color" class="p-1"></div>
                    </th>
                    <th scope="col" class="pb-0" *ngIf="bandsName.includes('thermalCoefficient')">
                        {{ t('thermalCoefficient') | titlecase }}
                        <div [appResistorColor]="resistor['thermalCoefficient'].color" class="p-1"></div>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let color of bandsColors">
                    <!-- colors -->
                    <th scope="row">
                        <div class="rounded-pill px-2 py-1" [appResistorColor]="color">
                            {{ t('colorName.' + color) | titlecase }}
                        </div>
                    </th>
                    <!-- digit1 -->
                    <td>
                        <div *ngIf="resistorConfig.digit1[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-digit1-{{ color }}">
                                <input (click)="setBandDigit1(color)"
                                       [checked]="resistor.digit1.color === color"
                                       class="form-check-input" type="radio" name="band-digit1"
                                       id="band-digit1-{{ color }}">
                                {{ resistorConfig.digit1[color] }}
                            </label>
                        </div>
                    </td>
                    <!-- digit2 -->
                    <td>
                        <div *ngIf="resistorConfig.digit2[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-digit2-{{ color }}">
                                <input (click)="setBandDigit2(color)"
                                       [checked]="resistor.digit2.color === color"
                                       class="form-check-input" type="radio"
                                       name="band-digit2" id="band-digit2-{{ color }}">
                                {{ resistorConfig.digit2[color] }}
                            </label>
                        </div>
                    </td>
                    <!-- digit3 -->
                    <td *ngIf="bandsName.includes('digit3')">
                        <div *ngIf="resistorConfig.digit3[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-digit3-{{ color }}">
                                <input (click)="setBandDigit3(color)"
                                       [checked]="resistor.digit3.color === color"
                                       class="form-check-input" type="radio"
                                       name="band-digit3" id="band-digit3-{{ color }}">
                                {{ resistorConfig.digit3[color] }}
                            </label>
                        </div>
                    </td>
                    <!-- multiplier -->
                    <td *ngIf="bandsName.includes('multiplier')">
                        <div *ngIf="resistorConfig.multiplier[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-multiplier-{{ color }}">
                                <input (click)="setBandMultiplier(color)"
                                       [checked]="resistor.multiplier.color === color"
                                       class="form-check-input" type="radio"
                                       name="band-multiplier" id="band-multiplier-{{ color }}">
                                {{ resistorConfig.multiplier[color] | format: 'multiplier' }}
                            </label>
                        </div>
                    </td>
                    <!-- tolerance -->
                    <td>
                        <div *ngIf="resistorConfig.tolerance[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-tolerance-{{ color }}">
                                <input [disabled]="resistor.bandsCount === 3"
                                       [checked]="(resistor.bandsCount === 3 && color === 'none') || resistor.tolerance.color === color"
                                       (click)="setBandTolerance(color)"
                                       class="form-check-input" type="radio" name="band-tolerance"
                                       id="band-tolerance-{{ color }}">
                                {{ resistorConfig.tolerance[color] | format: 'tolerance' }}
                            </label>
                        </div>
                    </td>
                    <!-- thermalCoefficient -->
                    <td *ngIf="bandsName.includes('thermalCoefficient')">
                        <div *ngIf="resistorConfig.thermalCoefficient[color]" class="form-check">
                            <label class="form-check-label py-1" for="band-thermalCoefficient-{{ color }}">
                                <input (click)="setBandThermalCoefficient(color)"
                                       [checked]="resistor.thermalCoefficient.color === color"
                                       class="form-check-input" type="radio"
                                       name="band-thermalCoefficient" id="band-thermalCoefficient-{{ color }}">
                                {{ resistorConfig.thermalCoefficient[color] | format: 'thermalCoefficient' }}
                            </label>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </ng-container>
</ng-container>
